---
title: VPC Flow Logs
parent: AWS VPC
nav_order: 6
---

# VPC Flow Logs

VPC 네트워크 트래픽을 모니터링하고 분석할 수 있는 VPC Flow Logs에 대해 설명합니다.

## VPC Flow Logs란?

VPC Flow Logs는 VPC의 네트워크 인터페이스에서 전송되는 IP 트래픽에 대한 정보를 캡처하는 기능입니다. 네트워크 보안 모니터링, 트러블슈팅, 비용 최적화에 활용됩니다.

## 주요 특징

- **트래픽 모니터링**: 모든 IP 트래픽 로깅
- **실시간 분석**: CloudWatch Logs를 통한 실시간 분석
- **보안 감사**: 의심스러운 트래픽 패턴 탐지
- **비용 최적화**: 사용하지 않는 리소스 식별

## Flow Log 레벨

### 1. VPC 레벨
- VPC 내 모든 네트워크 인터페이스의 트래픽
- 전체 네트워크 활동 파악

### 2. 서브넷 레벨
- 특정 서브넷의 트래픽만 캡처
- 서브넷별 트래픽 분석

### 3. 네트워크 인터페이스 레벨
- 개별 ENI의 트래픽만 캡처
- 특정 인스턴스의 네트워크 활동 분석

## Flow Log 필드

| 필드 | 설명 | 예시 |
|------|------|------|
| version | Flow Log 버전 | 2 |
| account-id | AWS 계정 ID | 123456789012 |
| interface-id | 네트워크 인터페이스 ID | eni-12345678 |
| srcaddr | 소스 IP 주소 | 10.0.0.1 |
| dstaddr | 대상 IP 주소 | 10.0.0.2 |
| srcport | 소스 포트 | 12345 |
| dstport | 대상 포트 | 80 |
| protocol | 프로토콜 번호 | 6 (TCP) |
| packets | 패킷 수 | 100 |
| bytes | 바이트 수 | 1024 |
| start | 세션 시작 시간 | 1234567890 |
| end | 세션 종료 시간 | 1234567891 |
| action | 허용/거부 | ACCEPT, REJECT |
| log-status | 로그 상태 | OK, NODATA |

## 설정 방법

### 1. Flow Log 생성
1. VPC 콘솔 → Flow Logs → Create Flow Log
2. 리소스 유형 선택 (VPC/서브넷/ENI)
3. 대상 선택 (CloudWatch Logs/S3)
4. 로그 형식 선택 (기본/사용자 정의)

### 2. CloudWatch Logs 설정
- 로그 그룹 생성
- 보존 기간 설정
- 메트릭 필터 구성

## 분석 활용

### 1. 보안 모니터링
- 의심스러운 IP 주소 탐지
- 비정상적인 트래픽 패턴 식별
- 포트 스캔 공격 탐지

### 2. 성능 분석
- 대역폭 사용량 분석
- 트래픽 패턴 파악
- 병목 구간 식별

### 3. 비용 최적화
- 사용하지 않는 리소스 식별
- 데이터 전송 비용 분석
- 리소스 사용량 최적화

## 실무 활용 사례

### 보안 사고 대응
```
1. Flow Log에서 의심스러운 트래픽 패턴 발견
2. 소스 IP 주소 및 포트 분석
3. Security Groups/NACL 규칙 검토
4. 즉시 접근 차단 조치
```

### 네트워크 설계 검증
```
1. 예상 트래픽 패턴과 실제 트래픽 비교
2. 서브넷 간 통신 패턴 분석
3. 라우팅 최적화 검토
4. 아키텍처 개선 방안 도출
```

## 모범 사례

### 1. 로그 보존 정책
- 보안 요구사항에 따른 보존 기간 설정
- 비용과 보안의 균형 고려

### 2. 실시간 모니터링
- CloudWatch 알람 설정
- 비정상 패턴 자동 탐지

### 3. 정기적 분석
- 주간/월간 트래픽 리포트 생성
- 트렌드 분석 및 예측

{: .note }
VPC Flow Logs는 네트워크 보안과 성능 최적화를 위한 강력한 도구이지만, 적절한 분석 도구와 전문 지식이 필요합니다. 